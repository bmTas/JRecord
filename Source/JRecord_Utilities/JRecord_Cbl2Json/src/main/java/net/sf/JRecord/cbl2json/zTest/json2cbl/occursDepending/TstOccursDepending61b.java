package net.sf.JRecord.cbl2json.zTest.json2cbl.occursDepending;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;


import javax.xml.stream.XMLStreamException;

import junit.framework.TestCase;
import net.sf.JRecord.Common.Conversion;
import net.sf.JRecord.Numeric.ICopybookDialects;
import net.sf.JRecord.cbl2json.zTest.json2cbl.TstXmlConstants;
import net.sf.cobolToJson.Cobol2Json;
import net.sf.cobolToJson.def.ICobol2Json;


/**
 * This class tests Occurs Depending when 'Size' field is in a 
 * normal Array
 * 
 * @author Bruce Martin
 *
 */
public class TstOccursDepending61b extends TestCase {
//	private static String[] LINES = {
//			"line 0     0>1 00000 1>2 00010 00011 2>3 00020 00021 00022 3>4 00030 00031 00032 00033",
//			"line 1     0>2 00100 00101 1>3 00110 00111 00112 2>4 00120 00121 00122 00123 3>5 00130 00131 00132 00133 00134",
//			"line 2     0>3 00200 00201 00202 1>4 00210 00211 00212 00213 2>5 00220 00221 00222 00223 00224 3>1 00230",
//			"line 3     0>4 00300 00301 00302 00303 1>5 00310 00311 00312 00313 00314 2>1 00320 3>2 00330 00331",
//			"line 4     0>5 00400 00401 00402 00403 00404 1>1 00410 2>2 00420 00421 3>3 00430 00431 00432",
//			"line 5     0>1 00500 1>2 00510 00511 2>3 00520 00521 00522 3>4 00530 00531 00532 00533",
//			"line 6     0>2 00600 00601 1>3 00610 00611 00612 2>4 00620 00621 00622 00623 3>5 00630 00631 00632 00633 00634",
//			"line 7     0>3 00700 00701 00702 1>4 00710 00711 00712 00713 2>5 00720 00721 00722 00723 00724 3>1 00730",
//			"line 8     0>4 00800 00801 00802 00803 1>5 00810 00811 00812 00813 00814 2>1 00820 3>2 00830 00831",
//			"line 9     0>5 00900 00901 00902 00903 00904 1>1 00910 2>2 00920 00921 3>3 00930 00931 00932",
//	};
	private static String[] LINES2 = {
		"line 1   0",
		"line 2   1 0>1 00000",
		"line 3   1 0>2 00100 00101",
		"line 4   1 0>3 00200 00201 00202",
		"line 5   1 0>4 00300 00301 00302 00303",
		"line 6   1 0>5 00400 00401 00402 00403 00404",
		"line 7   1 0>1 00500",
		"line 8   1 0>2 00600 00601",
		"line 9   1 0>3 00700 00701 00702",
		"line 10  1 0>4 00800 00801 00802 00803",
		"line 11  1 0>5 00900 00901 00902 00903 00904",
		"line 12  2 0>1 00000 1>2 00010 00011",
		"line 13  2 0>2 00100 00101 1>3 00110 00111 00112",
		"line 14  2 0>3 00200 00201 00202 1>4 00210 00211 00212 00213",
		"line 15  2 0>4 00300 00301 00302 00303 1>5 00310 00311 00312 00313 00314",
		"line 16  2 0>5 00400 00401 00402 00403 00404 1>1 00410",
		"line 17  2 0>1 00500 1>2 00510 00511",
		"line 18  2 0>2 00600 00601 1>3 00610 00611 00612",
		"line 19  2 0>3 00700 00701 00702 1>4 00710 00711 00712 00713",
		"line 20  2 0>4 00800 00801 00802 00803 1>5 00810 00811 00812 00813 00814",
		"line 21  2 0>5 00900 00901 00902 00903 00904 1>1 00910",
		"line 22  3 0>1 00000 1>2 00010 00011 2>3 00020 00021 00022",
		"line 23  3 0>2 00100 00101 1>3 00110 00111 00112 2>4 00120 00121 00122 00123",
		"line 24  3 0>3 00200 00201 00202 1>4 00210 00211 00212 00213 2>5 00220 00221 00222 00223 00224",
		"line 25  3 0>4 00300 00301 00302 00303 1>5 00310 00311 00312 00313 00314 2>1 00320",
		"line 26  3 0>5 00400 00401 00402 00403 00404 1>1 00410 2>2 00420 00421",
		"line 27  3 0>1 00500 1>2 00510 00511 2>3 00520 00521 00522",
		"line 28  3 0>2 00600 00601 1>3 00610 00611 00612 2>4 00620 00621 00622 00623",
		"line 29  3 0>3 00700 00701 00702 1>4 00710 00711 00712 00713 2>5 00720 00721 00722 00723 00724",
		"line 30  3 0>4 00800 00801 00802 00803 1>5 00810 00811 00812 00813 00814 2>1 00820",
		"line 31  3 0>5 00900 00901 00902 00903 00904 1>1 00910 2>2 00920 00921",
		"line 32  4 0>1 00000 1>2 00010 00011 2>3 00020 00021 00022 3>4 00030 00031 00032 00033",
		"line 33  4 0>2 00100 00101 1>3 00110 00111 00112 2>4 00120 00121 00122 00123 3>5 00130 00131 00132 00133 00134",
		"line 34  4 0>3 00200 00201 00202 1>4 00210 00211 00212 00213 2>5 00220 00221 00222 00223 00224 3>1 00230",
		"line 35  4 0>4 00300 00301 00302 00303 1>5 00310 00311 00312 00313 00314 2>1 00320 3>2 00330 00331",
		"line 36  4 0>5 00400 00401 00402 00403 00404 1>1 00410 2>2 00420 00421 3>3 00430 00431 00432",
		"line 37  4 0>1 00500 1>2 00510 00511 2>3 00520 00521 00522 3>4 00530 00531 00532 00533",
		"line 38  4 0>2 00600 00601 1>3 00610 00611 00612 2>4 00620 00621 00622 00623 3>5 00630 00631 00632 00633 00634",
		"line 39  4 0>3 00700 00701 00702 1>4 00710 00711 00712 00713 2>5 00720 00721 00722 00723 00724 3>1 00730",
		"line 40  4 0>4 00800 00801 00802 00803 1>5 00810 00811 00812 00813 00814 2>1 00820 3>2 00830 00831",
		"line 41  4 0>5 00900 00901 00902 00903 00904 1>1 00910 2>2 00920 00921 3>3 00930 00931 00932",
	};
	private static String[] EXPECTED_JSON = {
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 1\",\n    \"Month-Count\" : 0\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 2\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 0\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 3\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 100\n      }, {\n        \"daily-sales\" : 101\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 4\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 200\n      }, {\n        \"daily-sales\" : 201\n      }, {\n        \"daily-sales\" : 202\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 5\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 300\n      }, {\n        \"daily-sales\" : 301\n      }, {\n        \"daily-sales\" : 302\n      }, {\n        \"daily-sales\" : 303\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 6\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 400\n      }, {\n        \"daily-sales\" : 401\n      }, {\n        \"daily-sales\" : 402\n      }, {\n        \"daily-sales\" : 403\n      }, {\n        \"daily-sales\" : 404\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 7\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 500\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 8\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 600\n      }, {\n        \"daily-sales\" : 601\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 9\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 700\n      }, {\n        \"daily-sales\" : 701\n      }, {\n        \"daily-sales\" : 702\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 10\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 800\n      }, {\n        \"daily-sales\" : 801\n      }, {\n        \"daily-sales\" : 802\n      }, {\n        \"daily-sales\" : 803\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 11\",\n    \"Month-Count\" : 1,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 900\n      }, {\n        \"daily-sales\" : 901\n      }, {\n        \"daily-sales\" : 902\n      }, {\n        \"daily-sales\" : 903\n      }, {\n        \"daily-sales\" : 904\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 12\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 0\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 10\n      }, {\n        \"daily-sales\" : 11\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 13\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 100\n      }, {\n        \"daily-sales\" : 101\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 110\n      }, {\n        \"daily-sales\" : 111\n      }, {\n        \"daily-sales\" : 112\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 14\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 200\n      }, {\n        \"daily-sales\" : 201\n      }, {\n        \"daily-sales\" : 202\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 210\n      }, {\n        \"daily-sales\" : 211\n      }, {\n        \"daily-sales\" : 212\n      }, {\n        \"daily-sales\" : 213\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 15\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 300\n      }, {\n        \"daily-sales\" : 301\n      }, {\n        \"daily-sales\" : 302\n      }, {\n        \"daily-sales\" : 303\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 310\n      }, {\n        \"daily-sales\" : 311\n      }, {\n        \"daily-sales\" : 312\n      }, {\n        \"daily-sales\" : 313\n      }, {\n        \"daily-sales\" : 314\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 16\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 400\n      }, {\n        \"daily-sales\" : 401\n      }, {\n        \"daily-sales\" : 402\n      }, {\n        \"daily-sales\" : 403\n      }, {\n        \"daily-sales\" : 404\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 410\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 17\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 500\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 510\n      }, {\n        \"daily-sales\" : 511\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 18\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 600\n      }, {\n        \"daily-sales\" : 601\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 610\n      }, {\n        \"daily-sales\" : 611\n      }, {\n        \"daily-sales\" : 612\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 19\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 700\n      }, {\n        \"daily-sales\" : 701\n      }, {\n        \"daily-sales\" : 702\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 710\n      }, {\n        \"daily-sales\" : 711\n      }, {\n        \"daily-sales\" : 712\n      }, {\n        \"daily-sales\" : 713\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 20\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 800\n      }, {\n        \"daily-sales\" : 801\n      }, {\n        \"daily-sales\" : 802\n      }, {\n        \"daily-sales\" : 803\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 810\n      }, {\n        \"daily-sales\" : 811\n      }, {\n        \"daily-sales\" : 812\n      }, {\n        \"daily-sales\" : 813\n      }, {\n        \"daily-sales\" : 814\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 21\",\n    \"Month-Count\" : 2,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 900\n      }, {\n        \"daily-sales\" : 901\n      }, {\n        \"daily-sales\" : 902\n      }, {\n        \"daily-sales\" : 903\n      }, {\n        \"daily-sales\" : 904\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 910\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 22\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 0\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 10\n      }, {\n        \"daily-sales\" : 11\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 20\n      }, {\n        \"daily-sales\" : 21\n      }, {\n        \"daily-sales\" : 22\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 23\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 100\n      }, {\n        \"daily-sales\" : 101\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 110\n      }, {\n        \"daily-sales\" : 111\n      }, {\n        \"daily-sales\" : 112\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 120\n      }, {\n        \"daily-sales\" : 121\n      }, {\n        \"daily-sales\" : 122\n      }, {\n        \"daily-sales\" : 123\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 24\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 200\n      }, {\n        \"daily-sales\" : 201\n      }, {\n        \"daily-sales\" : 202\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 210\n      }, {\n        \"daily-sales\" : 211\n      }, {\n        \"daily-sales\" : 212\n      }, {\n        \"daily-sales\" : 213\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 220\n      }, {\n        \"daily-sales\" : 221\n      }, {\n        \"daily-sales\" : 222\n      }, {\n        \"daily-sales\" : 223\n      }, {\n        \"daily-sales\" : 224\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 25\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 300\n      }, {\n        \"daily-sales\" : 301\n      }, {\n        \"daily-sales\" : 302\n      }, {\n        \"daily-sales\" : 303\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 310\n      }, {\n        \"daily-sales\" : 311\n      }, {\n        \"daily-sales\" : 312\n      }, {\n        \"daily-sales\" : 313\n      }, {\n        \"daily-sales\" : 314\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 320\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 26\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 400\n      }, {\n        \"daily-sales\" : 401\n      }, {\n        \"daily-sales\" : 402\n      }, {\n        \"daily-sales\" : 403\n      }, {\n        \"daily-sales\" : 404\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 410\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 420\n      }, {\n        \"daily-sales\" : 421\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 27\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 500\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 510\n      }, {\n        \"daily-sales\" : 511\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 520\n      }, {\n        \"daily-sales\" : 521\n      }, {\n        \"daily-sales\" : 522\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 28\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 600\n      }, {\n        \"daily-sales\" : 601\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 610\n      }, {\n        \"daily-sales\" : 611\n      }, {\n        \"daily-sales\" : 612\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 620\n      }, {\n        \"daily-sales\" : 621\n      }, {\n        \"daily-sales\" : 622\n      }, {\n        \"daily-sales\" : 623\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 29\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 700\n      }, {\n        \"daily-sales\" : 701\n      }, {\n        \"daily-sales\" : 702\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 710\n      }, {\n        \"daily-sales\" : 711\n      }, {\n        \"daily-sales\" : 712\n      }, {\n        \"daily-sales\" : 713\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 720\n      }, {\n        \"daily-sales\" : 721\n      }, {\n        \"daily-sales\" : 722\n      }, {\n        \"daily-sales\" : 723\n      }, {\n        \"daily-sales\" : 724\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 30\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 800\n      }, {\n        \"daily-sales\" : 801\n      }, {\n        \"daily-sales\" : 802\n      }, {\n        \"daily-sales\" : 803\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 810\n      }, {\n        \"daily-sales\" : 811\n      }, {\n        \"daily-sales\" : 812\n      }, {\n        \"daily-sales\" : 813\n      }, {\n        \"daily-sales\" : 814\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 820\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 31\",\n    \"Month-Count\" : 3,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 900\n      }, {\n        \"daily-sales\" : 901\n      }, {\n        \"daily-sales\" : 902\n      }, {\n        \"daily-sales\" : 903\n      }, {\n        \"daily-sales\" : 904\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 910\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 920\n      }, {\n        \"daily-sales\" : 921\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 32\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 0\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 10\n      }, {\n        \"daily-sales\" : 11\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 20\n      }, {\n        \"daily-sales\" : 21\n      }, {\n        \"daily-sales\" : 22\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 30\n      }, {\n        \"daily-sales\" : 31\n      }, {\n        \"daily-sales\" : 32\n      }, {\n        \"daily-sales\" : 33\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 33\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 100\n      }, {\n        \"daily-sales\" : 101\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 110\n      }, {\n        \"daily-sales\" : 111\n      }, {\n        \"daily-sales\" : 112\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 120\n      }, {\n        \"daily-sales\" : 121\n      }, {\n        \"daily-sales\" : 122\n      }, {\n        \"daily-sales\" : 123\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 130\n      }, {\n        \"daily-sales\" : 131\n      }, {\n        \"daily-sales\" : 132\n      }, {\n        \"daily-sales\" : 133\n      }, {\n        \"daily-sales\" : 134\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 34\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 200\n      }, {\n        \"daily-sales\" : 201\n      }, {\n        \"daily-sales\" : 202\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 210\n      }, {\n        \"daily-sales\" : 211\n      }, {\n        \"daily-sales\" : 212\n      }, {\n        \"daily-sales\" : 213\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 220\n      }, {\n        \"daily-sales\" : 221\n      }, {\n        \"daily-sales\" : 222\n      }, {\n        \"daily-sales\" : 223\n      }, {\n        \"daily-sales\" : 224\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 230\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 35\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 300\n      }, {\n        \"daily-sales\" : 301\n      }, {\n        \"daily-sales\" : 302\n      }, {\n        \"daily-sales\" : 303\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 310\n      }, {\n        \"daily-sales\" : 311\n      }, {\n        \"daily-sales\" : 312\n      }, {\n        \"daily-sales\" : 313\n      }, {\n        \"daily-sales\" : 314\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 320\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 330\n      }, {\n        \"daily-sales\" : 331\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 36\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 400\n      }, {\n        \"daily-sales\" : 401\n      }, {\n        \"daily-sales\" : 402\n      }, {\n        \"daily-sales\" : 403\n      }, {\n        \"daily-sales\" : 404\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 410\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 420\n      }, {\n        \"daily-sales\" : 421\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 430\n      }, {\n        \"daily-sales\" : 431\n      }, {\n        \"daily-sales\" : 432\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 37\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 500\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 510\n      }, {\n        \"daily-sales\" : 511\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 520\n      }, {\n        \"daily-sales\" : 521\n      }, {\n        \"daily-sales\" : 522\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 530\n      }, {\n        \"daily-sales\" : 531\n      }, {\n        \"daily-sales\" : 532\n      }, {\n        \"daily-sales\" : 533\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 38\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 600\n      }, {\n        \"daily-sales\" : 601\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 610\n      }, {\n        \"daily-sales\" : 611\n      }, {\n        \"daily-sales\" : 612\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 620\n      }, {\n        \"daily-sales\" : 621\n      }, {\n        \"daily-sales\" : 622\n      }, {\n        \"daily-sales\" : 623\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 630\n      }, {\n        \"daily-sales\" : 631\n      }, {\n        \"daily-sales\" : 632\n      }, {\n        \"daily-sales\" : 633\n      }, {\n        \"daily-sales\" : 634\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 39\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 700\n      }, {\n        \"daily-sales\" : 701\n      }, {\n        \"daily-sales\" : 702\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 710\n      }, {\n        \"daily-sales\" : 711\n      }, {\n        \"daily-sales\" : 712\n      }, {\n        \"daily-sales\" : 713\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 720\n      }, {\n        \"daily-sales\" : 721\n      }, {\n        \"daily-sales\" : 722\n      }, {\n        \"daily-sales\" : 723\n      }, {\n        \"daily-sales\" : 724\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 730\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 40\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 4,\n      \"week\" : [ {\n        \"daily-sales\" : 800\n      }, {\n        \"daily-sales\" : 801\n      }, {\n        \"daily-sales\" : 802\n      }, {\n        \"daily-sales\" : 803\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 810\n      }, {\n        \"daily-sales\" : 811\n      }, {\n        \"daily-sales\" : 812\n      }, {\n        \"daily-sales\" : 813\n      }, {\n        \"daily-sales\" : 814\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 820\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 830\n      }, {\n        \"daily-sales\" : 831\n      } ]\n    } ]\n  } ]\n}",
		"{\n  \"Location-Details\" : [ {\n    \"Test-id\" : \"line 41\",\n    \"Month-Count\" : 4,\n    \"a4\" : [ {\n      \"text\" : \" 0>\",\n      \"week-of-month\" : 5,\n      \"week\" : [ {\n        \"daily-sales\" : 900\n      }, {\n        \"daily-sales\" : 901\n      }, {\n        \"daily-sales\" : 902\n      }, {\n        \"daily-sales\" : 903\n      }, {\n        \"daily-sales\" : 904\n      } ]\n    }, {\n      \"text\" : \" 1>\",\n      \"week-of-month\" : 1,\n      \"week\" : [ {\n        \"daily-sales\" : 910\n      } ]\n    }, {\n      \"text\" : \" 2>\",\n      \"week-of-month\" : 2,\n      \"week\" : [ {\n        \"daily-sales\" : 920\n      }, {\n        \"daily-sales\" : 921\n      } ]\n    }, {\n      \"text\" : \" 3>\",\n      \"week-of-month\" : 3,\n      \"week\" : [ {\n        \"daily-sales\" : 930\n      }, {\n        \"daily-sales\" : 931\n      }, {\n        \"daily-sales\" : 932\n      } ]\n    } ]\n  } ]\n}"
	};



	public void testConversionToXml2() throws IOException,  XMLStreamException {
		String copybookFileName = TstXmlConstants.COBOL_DIRECTORY + "OccursDependingOn61b.cbl";

		
		ICobol2Json cbl2Xml = Cobol2Json.newCobol2Json(copybookFileName)
				.setDialect(ICopybookDialects.FMT_GNU_COBOL);
		
		for (int i = 0; i < LINES2.length; i++) {
			ByteArrayOutputStream os = new ByteArrayOutputStream();
			cbl2Xml.cobol2json(new ByteArrayInputStream(LINES2[i].getBytes()), os);

//			assertEquals(EXPECTED_XML2[i], os.toByteArray()));

			String actual = Conversion.replace(os.toString(), "\r", "").toString();
			assertEquals(i + "", EXPECTED_JSON[i], actual);
//			System.out.println();
//			System.out.println(LINES[i]);
//			System.out.println(os.toString());
		}
	}


}
